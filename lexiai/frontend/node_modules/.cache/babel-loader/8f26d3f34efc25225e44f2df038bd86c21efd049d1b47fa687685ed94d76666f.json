{"ast":null,"code":"var _jsxFileName = \"/Users/jessicagoel/LegallyCoded-2/lexiai/frontend/src/components/chatbot/ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useContext } from 'react';\nimport { Form, Button, Card, Spinner } from 'react-bootstrap';\nimport { FaPaperPlane } from 'react-icons/fa';\nimport axios from 'axios';\nimport { AuthContext } from '../../context/AuthContext';\nimport ChatMessage from './ChatMessage';\nimport RelevantCases from './RelevantCases';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterface = () => {\n  _s();\n  const [messages, setMessages] = useState([{\n    id: 1,\n    text: \"Hello! I'm LexiAI, your legal assistant. How can I help you today?\",\n    sender: 'ai'\n  }]);\n  const [currentMessage, setCurrentMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [relevantCases, setRelevantCases] = useState([]);\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll to the bottom of the chat\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!currentMessage.trim()) return;\n\n    // Add user message to chat\n    const userMessage = {\n      id: messages.length + 1,\n      text: currentMessage,\n      sender: 'user'\n    };\n    setMessages([...messages, userMessage]);\n    setCurrentMessage('');\n    setLoading(true);\n    try {\n      // Send query to API\n      const response = await axios.post('/api/search/query', {\n        query: currentMessage,\n        user_id: currentUser === null || currentUser === void 0 ? void 0 : currentUser.user_id\n      });\n\n      // Add AI response to chat\n      const aiMessage = {\n        id: messages.length + 2,\n        text: response.data.answer,\n        sender: 'ai'\n      };\n      setMessages(prev => [...prev, aiMessage]);\n\n      // Update relevant cases\n      if (response.data.relevant_cases && response.data.relevant_cases.length > 0) {\n        setRelevantCases(response.data.relevant_cases);\n      }\n    } catch (error) {\n      console.error('Error querying AI:', error);\n\n      // Add error message\n      const errorMessage = {\n        id: messages.length + 2,\n        text: \"I'm sorry, I encountered an error processing your request. Please try again.\",\n        sender: 'ai'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow-1\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: \"chat-container\",\n        style: {\n          height: '60vh',\n          overflowY: 'auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [messages.map(message => /*#__PURE__*/_jsxDEV(ChatMessage, {\n            message: message\n          }, message.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center my-2\",\n            children: [/*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\",\n              variant: \"primary\",\n              size: \"sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ms-2\",\n              children: \"Thinking...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handleSubmit,\n        className: \"mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            value: currentMessage,\n            onChange: e => setCurrentMessage(e.target.value),\n            placeholder: \"Type your legal question here...\",\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            type: \"submit\",\n            className: \"ms-2\",\n            disabled: loading || !currentMessage.trim(),\n            children: /*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), relevantCases.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ms-3\",\n      style: {\n        width: '30%'\n      },\n      children: /*#__PURE__*/_jsxDEV(RelevantCases, {\n        cases: relevantCases\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"/NTWObvC+bKE/rYhxL9D/w9kXLo=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useContext","Form","Button","Card","Spinner","FaPaperPlane","axios","AuthContext","ChatMessage","RelevantCases","jsxDEV","_jsxDEV","ChatInterface","_s","messages","setMessages","id","text","sender","currentMessage","setCurrentMessage","loading","setLoading","relevantCases","setRelevantCases","currentUser","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSubmit","e","preventDefault","trim","userMessage","length","response","post","query","user_id","aiMessage","data","answer","prev","relevant_cases","error","console","errorMessage","className","children","style","height","overflowY","Body","map","message","fileName","_jsxFileName","lineNumber","columnNumber","animation","variant","size","ref","onSubmit","Control","type","value","onChange","target","placeholder","disabled","width","cases","_c","$RefreshReg$"],"sources":["/Users/jessicagoel/LegallyCoded-2/lexiai/frontend/src/components/chatbot/ChatInterface.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useContext } from 'react';\nimport { Form, Button, Card, Spinner } from 'react-bootstrap';\nimport { FaPaperPlane } from 'react-icons/fa';\nimport axios from 'axios';\nimport { AuthContext } from '../../context/AuthContext';\nimport ChatMessage from './ChatMessage';\nimport RelevantCases from './RelevantCases';\n\nconst ChatInterface = () => {\n  const [messages, setMessages] = useState([\n    { \n      id: 1, \n      text: \"Hello! I'm LexiAI, your legal assistant. How can I help you today?\", \n      sender: 'ai' \n    }\n  ]);\n  const [currentMessage, setCurrentMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [relevantCases, setRelevantCases] = useState([]);\n  \n  const { currentUser } = useContext(AuthContext);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll to the bottom of the chat\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!currentMessage.trim()) return;\n    \n    // Add user message to chat\n    const userMessage = {\n      id: messages.length + 1,\n      text: currentMessage,\n      sender: 'user'\n    };\n    \n    setMessages([...messages, userMessage]);\n    setCurrentMessage('');\n    setLoading(true);\n    \n    try {\n      // Send query to API\n      const response = await axios.post('/api/search/query', {\n        query: currentMessage,\n        user_id: currentUser?.user_id\n      });\n      \n      // Add AI response to chat\n      const aiMessage = {\n        id: messages.length + 2,\n        text: response.data.answer,\n        sender: 'ai'\n      };\n      \n      setMessages(prev => [...prev, aiMessage]);\n      \n      // Update relevant cases\n      if (response.data.relevant_cases && response.data.relevant_cases.length > 0) {\n        setRelevantCases(response.data.relevant_cases);\n      }\n    } catch (error) {\n      console.error('Error querying AI:', error);\n      \n      // Add error message\n      const errorMessage = {\n        id: messages.length + 2,\n        text: \"I'm sorry, I encountered an error processing your request. Please try again.\",\n        sender: 'ai'\n      };\n      \n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"d-flex\">\n      <div className=\"flex-grow-1\">\n        <Card className=\"chat-container\" style={{ height: '60vh', overflowY: 'auto' }}>\n          <Card.Body>\n            {messages.map(message => (\n              <ChatMessage key={message.id} message={message} />\n            ))}\n            {loading && (\n              <div className=\"text-center my-2\">\n                <Spinner animation=\"border\" variant=\"primary\" size=\"sm\" />\n                <span className=\"ms-2\">Thinking...</span>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </Card.Body>\n        </Card>\n        \n        <Form onSubmit={handleSubmit} className=\"mt-3\">\n          <div className=\"d-flex\">\n            <Form.Control\n              type=\"text\"\n              value={currentMessage}\n              onChange={(e) => setCurrentMessage(e.target.value)}\n              placeholder=\"Type your legal question here...\"\n              disabled={loading}\n            />\n            <Button \n              variant=\"primary\" \n              type=\"submit\" \n              className=\"ms-2\" \n              disabled={loading || !currentMessage.trim()}\n            >\n              <FaPaperPlane />\n            </Button>\n          </div>\n        </Form>\n      </div>\n      \n      {relevantCases.length > 0 && (\n        <div className=\"ms-3\" style={{ width: '30%' }}>\n          <RelevantCases cases={relevantCases} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatInterface; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}